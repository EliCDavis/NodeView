!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Graph2D=e()}}(function(){return function e(t,n,o){function r(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){function o(e,t,n){var o=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(o*o+r*r);if(0===i)return[0,0];var a=Math.atan(r/o),u=1;return 0>o&&(u=-1),[Math.cos(a)*n*u,Math.sin(a)*n*u]}t.exports=function(e,t){e.forEach(function(n){var r=[0,0];e.forEach(function(e){var i={};n.isLinkedWith(e)&&(i.$linkData=n.getLinkData(e));var a=t({pos:n.getPosition(),mass:n.getRadius(),node:n},{pos:e.getPosition(),mass:e.getRadius(),node:e},i),u=o(n.getPosition(),e.getPosition(),a);r[0]+=u[0],r[1]+=u[1]});var i=t({pos:n.getPosition(),mass:n.getRadius(),node:n},{pos:[0,0],mass:2*n.getRadius(),group:!0},{$groupPos:!0}),a=o(n.getPosition(),[0,0],i);r[0]+=5*a[0],r[1]+=5*a[1],n.accelerate(r[0],r[1])})}},{}],2:[function(e,t,n){t.exports=function(e,t,n){var o=n;void 0!==o&&null!==o||(o={});var r=e.pos,i=t.pos,a=e.mass,u=t.mass,s=i[0]-r[0],d=i[1]-r[1],c=Math.sqrt(s*s+d*d),l=Math.abs(a*u),f=l/(c*c)*1.1;return a+u>c&&(f*=-3.5),o.$groupPos&&(f=.05),f}},{}],3:[function(e,t,n){t.exports=function(e){var t=[null,null,null,null];return e.forEach(function(e){t=r(e,t)}),t};var o=function(e,t){for(var n=0;n<t.length;n++)if(null===t[n])return!1;var o=e.getPosition()[0],r=e.getPosition()[1],i=e.getRadius();return t[0]>o-i?!1:t[0]+t[2]<o+i?!1:t[1]>r-i?!1:!(t[1]+t[3]<r+i)},r=function(e,t){if(o(e,t))return t;for(var n=0;n<t.length;n++)if(null===t[n]){var r=e.getRadius();return[e.getPosition()[0]-r/2,e.getPosition()[1]-r/2,r,r]}var i=e.getPosition()[0],a=e.getPosition()[1],r=e.getRadius();if(t[0]>i-r){var u=i-r;t[2]+=Math.abs(t[0]-u),t[0]=u}return t[0]+t[2]<i+r&&(t[2]=i+r-t[0]),t[1]>a-r&&(t[3]+=Math.abs(a-r-t[1]),t[1]=a-r),t[1]+t[3]<a+r&&(t[3]=a+r-t[1]),t}},{}],4:[function(e,t,n){function o(e,t,n){for(var o=0;o<e.length;o++){var r=e[o].getPosition(),i=Math.sqrt(Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2));if(n>i)return!1}return!0}var r=e("../Util/GetCanvasSize"),i=e("./GetNodeCenter");t.exports=function(e,t){var n=t.getNodes();if(0===n.length){var a=r(t),u=[a[0]/2,a[1]/2];return[u[0]*(1/t.getScale()),u[1]*(1/t.getScale())]}for(var s=i(n),d=e/4,c=0;1e4>c;){var l=2*c;0===c&&(l=1);for(var f=[],g=[],h=[],v=[],p=(c+.5)*d,y=[s[0]-p,s[1]-p],m=[s[0]+p,s[1]-p],x=[s[0]-p,s[1]+p],P=[s[0]+p,s[1]+p],M=0;l>M;M++)f.push([y[0],y[1]+d*M]),g.push([P[0],P[1]-d*M]),h.push([m[0]-d*M,m[1]]),v.push([x[0]+d*M,x[1]]);for(var D=f.concat(g).concat(h).concat(v),M=0;M<D.length;M++)if(o(n,D[M],e))return D[M];c++}return console.log("Failure to find place! Sorry dude."),[0,0]}},{"../Util/GetCanvasSize":15,"./GetNodeCenter":5}],5:[function(e,t,n){t.exports=function(e){var t=[0,0],n=[0,0];return e.forEach(function(e){n[0]+=e.getPosition()[0],n[1]+=e.getPosition()[1]}),t[0]=n[0]/e.length,t[1]=n[1]/e.length,t}},{}],6:[function(e,t,n){"use strict";function o(t){var n=this,o=1,l=0,f=0,g=[],h=new r;n.setOption=function(e,t){h(e,t)};var v=[],p=null,y=e("../Rendering/DefaultLinkRender");n.nodesAreLinked=function(e,t){return e.isLinkedWith(t)},n.setLinkRenderMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Link Render Method!                            Arguement must be typeof function!"):4!==e.length?void console.error("Failure to set Link Render Method!                            Method's arguement length must be 4 so it                           can be passed the graph being rendered, node 1                           position on canvas, node 2 position on canvas, and                           any link data associated with them!"):void(y=e)},n.setBackgroundRenderMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Background Render Method!                            Arguement must be typeof function!"):1!==e.length?void console.error("Failure to set Background Render Method!                            Method's arguement length must be 1 so it                           can be passed the graph being rendered!"):void(p=e)};var m=e("../Util/MouseToGraphCoordinates"),x=null;n.getContext=function(){return x};var P="free",M=null,D=null,R=function(e){if(!e.getRenderData().$mouseOver){e.setRenderDataByKey("$mouseOver",!0);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborMouseOver",!0)}},k=function(e){e.setRenderDataByKey("$mouseOver",!1);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborMouseOver",!1)},N=function(e){return D=e,"dragging"===P?("node"===M.itemType&&c(M.item),M=null,void(P="free")):(g.forEach(function(t){w(t,m(e,n))&&t.onclick(t)}),void(P="free"))},w=function(e,t){return null===e.getClickDetectionFunction()?E(e,n,[t.x,t.y]):e.wasClicked(n,[t.x,t.y])},b=function(e){D=e;var t=m(e,n);P="hold",g.forEach(function(e){var n=w(e,t);n&&(M={item:e,itemPos:e.getPosition(),mousePos:[t.x,t.y],itemType:"node"})}),null===M&&(M={item:n,itemPos:n.getPosition(),mousePos:[t.x,t.y],itemType:"graph"})},C=function(e){null!==M&&"node"===M.itemType&&(c(M.item),k(M.item)),D=null,M=null,"dragging"===P&&(P="free")},F=function(e){if(D=e,"hold"===P&&(P="dragging","node"===M.itemType&&d(M.item)),"dragging"===P){var t=M.itemPos,r=M.mousePos;if("node"===M.itemType){var i=m(e,n);M.item.setPosition(i.x+(t[0]-r[0]),i.y+(t[1]-r[1]))}if("graph"===M.itemType){var i=n.getContext().canvas.relMouseCoords(e),a=i.x/o,u=i.y/o;M.item.setPosition(a-r[0],u-r[1])}}},L=function(e){var t=o,r=0;r=e.deltaY>0?-.05:.05,t+=r*t;var i=s(n),a=[i[0]*(1/o)*.5,i[1]*(1/o)*.5],u=[i[0]*(1/t)*.5,i[1]*(1/t)*.5],d=n.getPosition();n.setPosition(d[0]+(u[0]-a[0]),d[1]+(u[1]-a[1])),o=t},T=function(e){},O=function(e){e.addEventListener("mouseup",function(e){N(e)}),e.addEventListener("mousedown",function(e){b(e)}),e.addEventListener("mouseout",function(e){C(e)}),e.addEventListener("mousemove",function(e){F(e)}),e.addEventListener("mousewheel",function(e){L(e)}),e.addEventListener("dblclick",function(e){T(e)})};null!==t&&void 0!==t&&(x=t.getContext("2d"),O(t)),n.kruskalsPath=function(e,t){throw"not yet implemented!"},n.getNodes=function(){return g},n.clearLinks=function(){g.forEach(function(e){e.clearLinks()}),v=[]},n.clearNodes=function(){g=[]},n.getNodeClosestToPoint=function(e){var t=null,n=1e7;return g.forEach(function(o){var r=o.distanceFrom(e);n>r&&(t=o,n=r)}),t},n.getPosition=function(){return[l,f]},n.setPosition=function(e,t){if(!a.isNumeric(e))throw"Failed to set graph position!  Invalid x value: "+e;if(!a.isNumeric(t))throw"Failed to set graph position!  Invalid y value: "+t;l=e,f=t},n.getScale=function(){return o};var S=function(e){var t=o;if(s(n)[0]<s(n)[1]){var r=e[2],i=s(n)[0];t=i/r}else{var a=e[3],u=s(n)[1];t=u/a}var d=t-o;o+=.1*d};n.getBoundsFromNodes=e("./GetBoundsFromNodes");var B=e("../Rendering/DefaultNodeRender"),E=function(e,t,n){return e.distanceFrom(n)<=.6*e.getRadius()};n.setDefaultNodeRenderAndMouseDetection=function(e,t){return"function"!=typeof e?void console.error("Failure to set Node Render Method!                            Arguement must be a function!"):3!==e.length?void console.error("Failure to set Node Render Method!                            Method's arguement length must be 3 so it                           can be passed the node, it's position, and graph being rendered!"):"function"!=typeof t?void console.error("Failure to set Node Click Detection Method!                            Arguement must be a function!"):3!==t.length?void console.error("Failure to set Node Render Method!                            Method's arguement length must be 2 so it                           can be passed the node and graph being rendered!"):(B=e,void(E=t))},n.createNode=function(e){var t=u(e,n);return g.push(t),t},n.linkNodes=function(e,t,n){if(null===e||void 0===e)throw"Failure to link! The first node passed in to link was: "+e;if(null===t||void 0===t)throw"Failure to link! The second node passed in to link was: "+t;if(e.isLinkedWith(t))throw"Nodes are already linked!";e.addLink(t,n),t.addLink(e,n);var o={nodes:[e,t],linkData:n};return v.push(o),o},n.setNodeAttractionMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Node Attraction Method!                            Arguement must be typeof function!"):3!==e.length?void console.error("Failure to set Node Attraction Method!                            Method's arguement length must be 3 so it                           can be passed the two nodes being rendered and any                           data associated with them!!"):void(A=e)};var A=e("./DefaultNodeAttraction"),G=[];n.postRender=function(e){if("function"!=typeof e)throw"Post render only accepts functions!";G.push(e)};var $=function(){if(g&&0!==g.length){var e=n.getBoundsFromNodes(g);S(e);var t=[e[0]+e[2]/2,e[1]+e[3]/2],r=s(n),i=[r[0]/o/2-t[0],r[1]/o/2-t[1]],a=[i[0]-l,i[1]-f];l+=.1*a[0],f+=.1*a[1]}},q=function(e){w(e,m(D,n))?e.getRenderData().$mouseOver||R(e):e.getRenderData().$mouseOver&&k(e)},I=function(){x.canvas.width=x.canvas.offsetWidth,x.canvas.height=x.canvas.offsetHeight,x.clearRect(0,0,x.canvas.width,x.canvas.height),null!==p&&void 0!==p&&p(n),g.forEach(function(e){e.getChildren().forEach(function(t){var r=n.getContext();r.beginPath(),r.moveTo((e.getPosition()[0]+l)*o,(e.getPosition()[1]+f)*o),r.lineTo((t.getPosition()[0]+l)*o,(t.getPosition()[1]+f)*o),r.stroke()})}),v.forEach(function(e){var t=[(e.nodes[0].getPosition()[0]+l)*o,(e.nodes[0].getPosition()[1]+f)*o],r=[(e.nodes[1].getPosition()[0]+l)*o,(e.nodes[1].getPosition()[1]+f)*o];if(null!==y&&void 0!==y)return void y(n,t,r,e);var i=n.getContext();i.beginPath(),i.moveTo(t[0],t[1]),i.lineTo(r[0],r[1]),i.stroke()}),h.applyGravity()&&i(g,A),g.forEach(function(e){var t=!1;h.applyTranslation()&&(t=e.translate((Date.now()-K)/1e3)),null!==D&&(h.applyGravity()&&h.applyTranslation()?t&&q(e):q(e));var o=n.getPosition(),r=n.getScale(),i=[(e.getPosition()[0]+o[0])*r,(e.getPosition()[1]+o[1])*r];null!==e.getRenderFunction()&&void 0!==e.getRenderFunction()?e.render(e,i,n):B(e,i,n)}),G.forEach(function(e){e()}),G=[],!h.centerOnNodes()||M&&"graph"===M.itemType||$(),K=Date.now(),window.requestAnimationFrame(I)},K=Date.now();I()}t.exports=o;var r=e("./GraphOptions"),i=e("./ApplyGravityOnNodes"),a=e("../Util"),u=e("./SetupNode"),s=e("../Util/GetCanvasSize"),d=e("./SetNodeAsBeingDragged"),c=e("./SetNodeNotBeingDragged");a.init()},{"../Rendering/DefaultLinkRender":12,"../Rendering/DefaultNodeRender":13,"../Util":14,"../Util/GetCanvasSize":15,"../Util/MouseToGraphCoordinates":16,"./ApplyGravityOnNodes":1,"./DefaultNodeAttraction":2,"./GetBoundsFromNodes":3,"./GraphOptions":7,"./SetNodeAsBeingDragged":8,"./SetNodeNotBeingDragged":9,"./SetupNode":10}],7:[function(e,t,n){function o(){var e=this,t={centerOnNodes:{value:!0,constructor:Boolean},applyGravity:{value:!0,constructor:Boolean},applyTranslation:{value:!0,constructor:Boolean}};e.setOption=function(e,n){if("string"!=typeof e)throw e;try{if(t[e].constructor!==n.constructor)throw t[e].constructor,n.constructor;t[e].value=n}catch(o){throw o}},e.applyGravity=function(){return t.applyGravity.value},e.applyTranslation=function(){return t.applyTranslation.value},e.centerOnNodes=function(){return t.centerOnNodes.value}}t.exports=o},{}],8:[function(e,t,n){t.exports=function(e){e.setRenderDataByKey("$beingDragged",!0),e.setVelocity(0,0);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborBeingDragged",!0)}},{}],9:[function(e,t,n){t.exports=function(e){e.setRenderDataByKey("$beingDragged",!1);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborBeingDragged",!1)}},{}],10:[function(e,t,n){var o=e("../Node2D"),r=e("./GetFreeSpace");t.exports=function(e,t){var n=new o;e&&e.renderData?Object.keys(e.renderData).forEach(function(t,o){n.setRenderDataByKey(t,e.renderData[t])}):n.setRenderDataByKey("color","#000000");var i=70;return e&&e.radius&&(i=e.radius),n.setRadius(i),e&&e.position?n.setPosition(e.position):e&&e.freeSpace?n.setPosition(r(e.freeSpace,t)):n.setPosition(r(4*i,t)),n}},{"../Node2D":11,"./GetFreeSpace":4}],11:[function(e,t,n){"use strict";function o(){function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)});return t}var t=this,n="Node Name",o="Data",r={$mouseOver:!1,$beingDragged:!1},i=0,a=0,u=[],s=null,d=[],c=null,l=1,f=[0,0],g=e();t.getId=function(){return g},t.getGroupId=function(){return c},t.setVelocity=function(e,t){f=[e,t]},t.accelerate=function(e,t){var n=3e4;f[0]=Math.max(Math.min(n,f[0]+e),-n),f[1]=Math.max(Math.min(n,f[1]+t),-n)};var h=function(e){var t=f[0]>0?-1:1,n=f[1]>0?-1:1;f[0]+=Math.sqrt(Math.abs(f[0]))*e*t*2,f[1]+=Math.sqrt(Math.abs(f[1]))*e*n*2};t.translate=function(e){return 0===f[0]&&0===f[1]?!1:(i+=f[0]*e,a+=f[1]*e,h(e),!0)},t.distanceFrom=function(e,t){return e.constructor===Array&&(t=e[1],e=e[0]),Math.sqrt(Math.pow(e-i,2)+Math.pow(t-a,2))},t.setRadius=function(e){l=e},t.getRadius=function(){return l},t.onclick=function(){console.log("Clicked")};var v=null,p=null;t.setRenderDataByKey=function(e,t){r[e]=t},t.getRenderData=function(){return r},t.wasClicked=function(e,n){if(console.log("detection: ",p),null!==p&&void 0!==p){var o=p(t,e,n);if(o===!0||o===!1)return o}return!1},t.setRenderFunction=function(e,t){if(null===e)throw"Error setting render funciton for Node! Attempting to add a null render method";if(null===t)throw"Error setting render funciton for Node! Attempting to add a null click detection method";v=e,p=t},t.getRenderFunction=function(){return v},t.getClickDetectionFunction=function(){return p},t.render=function(e,t,n){if(null===v)throw"Failure to render node! There's no render function defined!";v(e,t,n)},t.getPosition=function(){return[i,a]},t.setPosition=function(e,t){return e.constructor===Array?(i=e[0],void(a=e[1])):(i=e,void(a=t))},t.getContents=function(){return n+" - "+o},t.addLink=function(e,t){if(null===e||void 0===e)throw"Failure to link node!  Link node was: "+e;d.push({node:e,linkData:t})},t.getLinks=function(){return d},t.isLinkedWith=function(e){for(var t=0;t<d.length;t++)if(d[t].node.getId()===e.getId())return!0;return!1},t.getLinkData=function(e){for(var t=0;t<d.length;t++)if(d[t].node.getId()===e.getId())return d[t].node;return null},t.clearLinks=function(){d=[]},t.setParent=function(e){null!==s&&void 0!==s&&s.removeChild(t),s=e,-1===s.getChildren().indexOf(t)&&s.addChild(t)},t.getParent=function(){return s},t.addChild=function(e){return-1!==u.indexOf(e)?void console.log("We already have that node as a child; ",e):(u.push(e),void(e.getParent()!==t&&e.setParent(t)))},t.getChildren=function(){return u},t.removeChild=function(e){var t=u.indexOf(e);if(-1===t)throw"Failure to remove child! Trying to remove a child we don't have!";u.splice(t,1)}}t.exports=o},{}],12:[function(e,t,n){t.exports=function(e,t,n,o){var r=e.getContext();r.strokeStyle="#ffffff",r.lineWidth=5*e.getScale(),r.beginPath(),r.moveTo(t[0],t[1]),r.lineTo(n[0],n[1]),r.stroke()}},{}],13:[function(e,t,n){t.exports=function(e,t,n){var o=n.getContext();o.fillStyle=e.getRenderData().color,o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8,0,2*Math.PI),o.fill(),e.getRenderData().$mouseOver&&(o.fillStyle="black",o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8*.5,0,2*Math.PI),o.fill()),e.getRenderData().$beingDragged&&(o.fillStyle="white",o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8*.3,0,2*Math.PI),o.fill())}},{}],14:[function(e,t,n){t.exports={init:function(){function e(e){var t=this.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;if(n=+t||0,1/0===Math.abs(n)&&(n=0),n>=r)return-1;for(n=Math.max(n>=0?n:r-Math.abs(n),0);r>n;){if(n in o&&o[n]===e)return n;n++}return-1}),HTMLCanvasElement.prototype.relMouseCoords=e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}},{}],15:[function(e,t,n){t.exports=function(e){return[e.getContext().canvas.width,e.getContext().canvas.height]}},{}],16:[function(e,t,n){t.exports=function(e,t){var n=t.getContext().canvas.relMouseCoords(e),o=t.getScale(),r=t.getPosition(),i=n.x/o-r[0],a=n.y/o-r[1];return{x:i,y:a}}},{}]},{},[6])(6)});