"use strict";function Graph2D(n){var e=this,t=1,o=0,i=0,r=[],c=null;e.getContext=function(){return c};var a=function(n){n.addEventListener("click",function(t){var o=n.relMouseCoords(t);r.forEach(function(n){n.wasClicked(e,[o.x,o.y])&&null!==n.onclick&&void 0!==n.onclick&&n.onclick()})},!1)};null!==n&&void 0!==n&&(c=n.getContext("2d"),a(n)),e.getPosition=function(){return[o,i]},e.getScale=function(){return t};var l=function(n,e){var t=e.getPosition(),o=e.getScale(),i=n.getRenderData().size,r=[n.getPosition()[0]+t[0]*o,n.getPosition()[1]+t[1]*o];e.getContext().fillStyle=n.getRenderData().color,e.getContext().fillRect(r[0],r[1],i[0]*o,i[1]*o)},u=function(n,e,t){var o=e.getPosition(),i=e.getScale(),r=n.getRenderData().size,c=[n.getPosition()[0]+o[0]*i,n.getPosition()[1]+o[1]*i],a=[r[0]*i,r[1]*i];return pointsInsideRect([c[0],c[1],a[0]-c[0],a[1]-c[1]],t)};e.createNode=function(){var n=new Node2D;return n.setRenderDataByKey("size",[75,75]),n.setRenderDataByKey("color","#4CAF50"),n.setRenderFunction(l,u),r.push(n),n};var d=function(){c.canvas.width=c.canvas.offsetWidth,c.canvas.height=c.canvas.offsetHeight,c.clearRect(0,0,c.canvas.width,c.canvas.height),r.forEach(function(n){null!==n.getRenderFunction()&&void 0!==n.getRenderFunction()&&n.render(n,e)}),window.requestAnimationFrame(d)};d()}function Node2D(){var n=this,e="Node Name",t="Data",o={},i=0,r=0;n.onclick=function(){console.log("Clicked")};var c=null,a=null;n.setRenderDataByKey=function(n,e){o[n]=e},n.getRenderData=function(){return o},n.wasClicked=function(e,t){if(null!==a&&void 0!==a){var o=a(n,e,t);if(o===!0||o===!1)return o}return!1},n.setRenderFunction=function(n,e){if(null===n)throw"Error setting render funciton for Node! Attempting to add a null render method";if(null===e)throw"Error setting render funciton for Node! Attempting to add a null click detection method";c=n,a=e},n.getRenderFunction=function(){return c},n.render=function(n,e){if(null===c)throw"Failure to render node! There's no render function defined!";c(n,e)},n.getPosition=function(){return[i,r]},n.getContents=function(){return e+" - "+t}}function pointsInsideRect(n,e){if(null===n||void 0===n||null===n.length||void 0===n.length||4!==n.length)throw"Invalid rect argument! Expecting array in format [x, y, width,                 height].  Instead recieved: "+n;if(null===e||void 0===e||null===e.length||void 0===e.length||2!==e.length)throw"Invalid point argument! Expecting array in format [x, y].                 Instead recieved: "+e;return n[0]<=e[0]&&e[0]<=n[0]+n[2]&&n[1]<=e[1]&&e[1]<=n[1]+n[3]?!0:(console.log(e+" not in "+n),!1)}!function(){function n(n){var e=0,t=0,o=0,i=0,r=this;do e+=r.offsetLeft-r.scrollLeft,t+=r.offsetTop-r.scrollTop;while(r=r.offsetParent);return o=n.pageX-e,i=n.pageY-t,{x:o,y:i}}HTMLCanvasElement.prototype.relMouseCoords=n}();