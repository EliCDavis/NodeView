!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Graph2D=e()}}(function(){return function e(t,n,o){function r(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e){var t=this,n=1,o=0,u=0,s=[],d=new r;t.setOption=function(e,t){d(e,t)};var c=[],l=null,f=function(e,t,n,o){var r=e.getContext();r.strokeStyle="#ffffff",r.lineWidth=5*e.getScale(),r.beginPath(),r.moveTo(t[0],t[1]),r.lineTo(n[0],n[1]),r.stroke()};t.nodesAreLinked=function(e,t){return e.isLinkedWith(t)},t.setLinkRenderMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Link Render Method!                            Arguement must be typeof function!"):4!==e.length?void console.error("Failure to set Link Render Method!                            Method's arguement length must be 4 so it                           can be passed the graph being rendered, node 1                           position on canvas, node 2 position on canvas, and                           any link data associated with them!"):void(f=e)},t.setBackgroundRenderMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Background Render Method!                            Arguement must be typeof function!"):1!==e.length?void console.error("Failure to set Background Render Method!                            Method's arguement length must be 1 so it                           can be passed the graph being rendered!"):void(l=e)};var g=function(e){var r=t.getContext().canvas.relMouseCoords(e),i=r.x/n-o,a=r.y/n-u;return{x:i,y:a}},h=null;t.getContext=function(){return h};var v=function(){return[t.getContext().canvas.width,t.getContext().canvas.height]},p="free",m=null,y=null,x=function(e){e.setRenderDataByKey("$beingDragged",!0),e.setVelocity(0,0);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborBeingDragged",!0)},P=function(e){e.setRenderDataByKey("$beingDragged",!1);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborBeingDragged",!1)},M=function(e){if(!e.getRenderData().$mouseOver){e.setRenderDataByKey("$mouseOver",!0);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborMouseOver",!0)}},k=function(e){e.setRenderDataByKey("$mouseOver",!1);for(var t=e.getLinks(),n=0;n<t.length;n++)t[n].node.setRenderDataByKey("$neighborMouseOver",!1)},w=function(e){return y=e,"dragging"===p?("node"===m.itemType&&P(m.item),m=null,void(p="free")):(s.forEach(function(t){R(t,g(e))&&t.onclick(t)}),void(p="free"))},R=function(e,n){return null===e.getClickDetectionFunction()?q(e,t,[n.x,n.y]):e.wasClicked(t,[n.x,n.y])},b=function(e){y=e;var n=g(e);p="hold",s.forEach(function(e){var t=R(e,n);t&&(m={item:e,itemPos:e.getPosition(),mousePos:[n.x,n.y],itemType:"node"})}),null===m&&(m={item:t,itemPos:t.getPosition(),mousePos:[n.x,n.y],itemType:"graph"})},D=function(e){null!==m&&"node"===m.itemType&&(P(m.item),k(m.item)),y=null,m=null,"dragging"===p&&(p="free")},F=function(e){if(y=e,"hold"===p&&(p="dragging","node"===m.itemType&&x(m.item)),"dragging"===p){var o=m.itemPos,r=m.mousePos;if("node"===m.itemType){var i=g(e);m.item.setPosition(i.x+(o[0]-r[0]),i.y+(o[1]-r[1]))}if("graph"===m.itemType){var i=t.getContext().canvas.relMouseCoords(e),a=i.x/n,u=i.y/n;m.item.setPosition(a-r[0],u-r[1])}}},N=function(e){var o=n,r=0;r=e.deltaY>0?-.05:.05,o+=r*o;var i=v(),a=[i[0]*(1/n)*.5,i[1]*(1/n)*.5],u=[i[0]*(1/o)*.5,i[1]*(1/o)*.5],s=t.getPosition();t.setPosition(s[0]+(u[0]-a[0]),s[1]+(u[1]-a[1])),n=o},C=function(e){},L=function(e){e.addEventListener("mouseup",function(e){w(e)}),e.addEventListener("mousedown",function(e){b(e)}),e.addEventListener("mouseout",function(e){D(e)}),e.addEventListener("mousemove",function(e){F(e)}),e.addEventListener("mousewheel",function(e){N(e)}),e.addEventListener("dblclick",function(e){C(e)})};null!==e&&void 0!==e&&(h=e.getContext("2d"),L(e)),t.kruskalsPath=function(e,t){throw"not yet implemented!"},t.getNodes=function(){return s},t.clearLinks=function(){s.forEach(function(e){e.clearLinks()}),c=[]},t.clearNodes=function(){s=[]},t.getNodeClosestToPoint=function(e){var t=null,n=1e7;return s.forEach(function(o){var r=o.distanceFrom(e);n>r&&(t=o,n=r)}),t},t.getPosition=function(){return[o,u]},t.setPosition=function(e,t){if(!a.isNumeric(e))throw"Failed to set graph position!  Invalid x value: "+e;if(!a.isNumeric(t))throw"Failed to set graph position!  Invalid y value: "+t;o=e,u=t},t.getScale=function(){return n};var T=function(e,t){for(var n=0;n<s.length;n++){var o=s[n].getPosition(),r=Math.sqrt(Math.pow(o[0]-e[0],2)+Math.pow(o[1]-e[1],2));if(t>r)return!1}return!0},O=function(e){var t=[0,0],n=[0,0];return e.forEach(function(e){n[0]+=e.getPosition()[0],n[1]+=e.getPosition()[1]}),t[0]=n[0]/e.length,t[1]=n[1]/e.length,t},E=function(e){var t=n;if(v()[0]<v()[1]){var o=e[2],r=v()[0];t=r/o}else{var i=e[3],a=v()[1];t=a/i}var u=t-n;n+=.1*u},B=function(e,t){for(var n=0;n<t.length;n++)if(null===t[n])return!1;var o=e.getPosition()[0],r=e.getPosition()[1],i=e.getRadius();return t[0]>o-i?!1:t[0]+t[2]<o+i?!1:t[1]>r-i?!1:!(t[1]+t[3]<r+i)},$=function(e,t){if(B(e,t))return t;for(var n=0;n<t.length;n++)if(null===t[n]){var o=e.getRadius();return[e.getPosition()[0]-o/2,e.getPosition()[1]-o/2,o,o]}var r=e.getPosition()[0],i=e.getPosition()[1],o=e.getRadius();if(t[0]>r-o){var a=r-o;t[2]+=Math.abs(t[0]-a),t[0]=a}return t[0]+t[2]<r+o&&(t[2]=r+o-t[0]),t[1]>i-o&&(t[3]+=Math.abs(i-o-t[1]),t[1]=i-o),t[1]+t[3]<i+o&&(t[3]=i+o-t[1]),t};t.getBoundsFromNodes=function(e){var t=[null,null,null,null];return e.forEach(function(e){t=$(e,t)}),t};var A=function(e){if(0===s.length){var t=v(),o=[t[0]/2,t[1]/2];return[o[0]*(1/n),o[1]*(1/n)]}for(var r=O(s),i=e/4,a=0;1e4>a;){var u=2*a;0===a&&(u=1);for(var d=[],c=[],l=[],f=[],g=(a+.5)*i,h=[r[0]-g,r[1]-g],p=[r[0]+g,r[1]-g],m=[r[0]-g,r[1]+g],y=[r[0]+g,r[1]+g],x=0;u>x;x++)d.push([h[0],h[1]+i*x]),c.push([y[0],y[1]-i*x]),l.push([p[0]-i*x,p[1]]),f.push([m[0]+i*x,m[1]]);for(var P=d.concat(c).concat(l).concat(f),x=0;x<P.length;x++)if(T(P[x],e))return P[x];a++}return console.log("Failure to find place! Sorry dude."),[0,0]},S=function(e,t,n){var o=n.getContext();o.fillStyle=e.getRenderData().color,o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8,0,2*Math.PI),o.fill(),e.getRenderData().$mouseOver&&(o.fillStyle="black",o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8*.5,0,2*Math.PI),o.fill()),e.getRenderData().$beingDragged&&(o.fillStyle="white",o.beginPath(),o.arc(t[0],t[1],e.getRadius()*n.getScale()*.8*.3,0,2*Math.PI),o.fill())},q=function(e,t,n){return e.distanceFrom(n)<=.6*e.getRadius()};t.setDefaultNodeRenderAndMouseDetection=function(e,t){return"function"!=typeof e?void console.error("Failure to set Node Render Method!                            Arguement must be a function!"):3!==e.length?void console.error("Failure to set Node Render Method!                            Method's arguement length must be 3 so it                           can be passed the node, it's position, and graph being rendered!"):"function"!=typeof t?void console.error("Failure to set Node Click Detection Method!                            Arguement must be a function!"):3!==t.length?void console.error("Failure to set Node Render Method!                            Method's arguement length must be 2 so it                           can be passed the node and graph being rendered!"):(S=e,void(q=t))},t.createNode=function(e){var t=new i;e&&e.renderData?Object.keys(e.renderData).forEach(function(n,o){t.setRenderDataByKey(n,e.renderData[n])}):t.setRenderDataByKey("color","#000000");var n=70;return e&&e.radius&&(n=e.radius),t.setRadius(n),e&&e.position?t.setPosition(e.position):e&&e.freeSpace?t.setPosition(A(e.freeSpace)):t.setPosition(A(4*n)),s.push(t),t},t.linkNodes=function(e,t,n){if(null===e||void 0===e)throw"Failure to link! The first node passed in to link was: "+e;if(null===t||void 0===t)throw"Failure to link! The second node passed in to link was: "+t;if(e.isLinkedWith(t))throw"Nodes are already linked!";e.addLink(t,n),t.addLink(e,n);var o={nodes:[e,t],linkData:n};return c.push(o),o},t.setNodeAttractionMethod=function(e){return"function"!=typeof e?void console.error("Failure to set Node Attraction Method!                            Arguement must be typeof function!"):3!==e.length?void console.error("Failure to set Node Attraction Method!                            Method's arguement length must be 3 so it                           can be passed the two nodes being rendered and any                           data associated with them!!"):void(I=e)};var I=function(e,t,n){var o=n;void 0!==o&&null!==o||(o={});var r=e.pos,i=t.pos,a=e.mass,u=t.mass,s=i[0]-r[0],d=i[1]-r[1],c=Math.sqrt(s*s+d*d),l=Math.abs(a*u),f=l/(c*c)*1.1;return a+u>c&&(f*=-3.5),o.$groupPos&&(f=.05),f},K=function(e,t,n){var o=e.pos,r=t.pos,i=r[0]-o[0],a=r[1]-o[1],u=Math.sqrt(i*i+a*a);if(0===u)return[0,0];var s=I(e,t,n),d=Math.atan(a/i),c=1;return 0>i&&(c=-1),[Math.cos(d)*s*c,Math.sin(d)*s*c]},G=[];t.postRender=function(e){if("function"!=typeof e)throw"Post render only accepts functions!";G.push(e)};var W=function(){if(s&&0!==s.length){var e=t.getBoundsFromNodes(s);E(e);var r=[e[0]+e[2]/2,e[1]+e[3]/2],i=v(),a=[i[0]/n/2-r[0],i[1]/n/2-r[1]],d=[a[0]-o,a[1]-u];o+=.1*d[0],u+=.1*d[1]}},U=function(e){e.forEach(function(t){var n=[0,0];e.forEach(function(e){var o={};t.isLinkedWith(e)&&(o.$linkData=t.getLinkData(e));var r=K({pos:t.getPosition(),mass:t.getRadius(),node:t},{pos:e.getPosition(),mass:e.getRadius(),node:e},o);n[0]+=r[0],n[1]+=r[1]});var o=K({pos:t.getPosition(),mass:t.getRadius(),node:t},{pos:[0,0],mass:2*t.getRadius(),group:!0},{$groupPos:!0});n[0]+=5*o[0],n[1]+=5*o[1],t.accelerate(n[0],n[1])})},j=function(e){R(e,g(y))?e.getRenderData().$mouseOver||M(e):e.getRenderData().$mouseOver&&k(e)},H=function(){h.canvas.width=h.canvas.offsetWidth,h.canvas.height=h.canvas.offsetHeight,h.clearRect(0,0,h.canvas.width,h.canvas.height),null!==l&&void 0!==l&&l(t),s.forEach(function(e){e.getChildren().forEach(function(r){var i=t.getContext();i.beginPath(),i.moveTo((e.getPosition()[0]+o)*n,(e.getPosition()[1]+u)*n),i.lineTo((r.getPosition()[0]+o)*n,(r.getPosition()[1]+u)*n),i.stroke()})}),c.forEach(function(e){var r=[(e.nodes[0].getPosition()[0]+o)*n,(e.nodes[0].getPosition()[1]+u)*n],i=[(e.nodes[1].getPosition()[0]+o)*n,(e.nodes[1].getPosition()[1]+u)*n];if(null!==f&&void 0!==f)return void f(t,r,i,e);var a=t.getContext();a.beginPath(),a.moveTo(r[0],r[1]),a.lineTo(i[0],i[1]),a.stroke()}),d.applyGravity()&&U(s),s.forEach(function(e){var n=!1;d.applyTranslation()&&(n=e.translate((Date.now()-V)/1e3)),null!==y&&(d.applyGravity()&&d.applyTranslation()?n&&j(e):j(e));var o=t.getPosition(),r=t.getScale(),i=[(e.getPosition()[0]+o[0])*r,(e.getPosition()[1]+o[1])*r];null!==e.getRenderFunction()&&void 0!==e.getRenderFunction()?e.render(e,i,t):S(e,i,t)}),G.forEach(function(e){e()}),G=[],!d.centerOnNodes()||m&&"graph"===m.itemType||W(),V=Date.now(),window.requestAnimationFrame(H)},V=Date.now();H()}t.exports=o;var r=e("./GraphOptions"),i=e("./Node2D"),a=e("./Util");a.init()},{"./GraphOptions":2,"./Node2D":3,"./Util":4}],2:[function(e,t,n){function o(){var e=this,t={centerOnNodes:{value:!0,constructor:Boolean},applyGravity:{value:!0,constructor:Boolean},applyTranslation:{value:!0,constructor:Boolean}};e.setOption=function(e,n){if("string"!=typeof e)throw e;try{if(t[e].constructor!==n.constructor)throw t[e].constructor,n.constructor;t[e].value=n}catch(o){throw o}},e.applyGravity=function(){return t.applyGravity.value},e.applyTranslation=function(){return t.applyTranslation.value},e.centerOnNodes=function(){return t.centerOnNodes.value}}t.exports=o},{}],3:[function(e,t,n){"use strict";function o(){function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)});return t}var t=this,n="Node Name",o="Data",r={$mouseOver:!1,$beingDragged:!1},i=0,a=0,u=[],s=null,d=[],c=null,l=1,f=[0,0],g=e();t.getId=function(){return g},t.getGroupId=function(){return c},t.setVelocity=function(e,t){f=[e,t]},t.accelerate=function(e,t){var n=3e4;f[0]=Math.max(Math.min(n,f[0]+e),-n),f[1]=Math.max(Math.min(n,f[1]+t),-n)};var h=function(e){var t=f[0]>0?-1:1,n=f[1]>0?-1:1;f[0]+=Math.sqrt(Math.abs(f[0]))*e*t*2,f[1]+=Math.sqrt(Math.abs(f[1]))*e*n*2};t.translate=function(e){return 0===f[0]&&0===f[1]?!1:(i+=f[0]*e,a+=f[1]*e,h(e),!0)},t.distanceFrom=function(e,t){return e.constructor===Array&&(t=e[1],e=e[0]),Math.sqrt(Math.pow(e-i,2)+Math.pow(t-a,2))},t.setRadius=function(e){l=e},t.getRadius=function(){return l},t.onclick=function(){console.log("Clicked")};var v=null,p=null;t.setRenderDataByKey=function(e,t){r[e]=t},t.getRenderData=function(){return r},t.wasClicked=function(e,n){if(console.log("detection: ",p),null!==p&&void 0!==p){var o=p(t,e,n);if(o===!0||o===!1)return o}return!1},t.setRenderFunction=function(e,t){if(null===e)throw"Error setting render funciton for Node! Attempting to add a null render method";if(null===t)throw"Error setting render funciton for Node! Attempting to add a null click detection method";v=e,p=t},t.getRenderFunction=function(){return v},t.getClickDetectionFunction=function(){return p},t.render=function(e,t,n){if(null===v)throw"Failure to render node! There's no render function defined!";v(e,t,n)},t.getPosition=function(){return[i,a]},t.setPosition=function(e,t){return e.constructor===Array?(i=e[0],void(a=e[1])):(i=e,void(a=t))},t.getContents=function(){return n+" - "+o},t.addLink=function(e,t){if(null===e||void 0===e)throw"Failure to link node!  Link node was: "+e;d.push({node:e,linkData:t})},t.getLinks=function(){return d},t.isLinkedWith=function(e){for(var t=0;t<d.length;t++)if(d[t].node.getId()===e.getId())return!0;return!1},t.getLinkData=function(e){for(var t=0;t<d.length;t++)if(d[t].node.getId()===e.getId())return d[t].node;return null},t.clearLinks=function(){d=[]},t.setParent=function(e){null!==s&&void 0!==s&&s.removeChild(t),s=e,-1===s.getChildren().indexOf(t)&&s.addChild(t)},t.getParent=function(){return s},t.addChild=function(e){return-1!==u.indexOf(e)?void console.log("We already have that node as a child; ",e):(u.push(e),void(e.getParent()!==t&&e.setParent(t)))},t.getChildren=function(){return u},t.removeChild=function(e){var t=u.indexOf(e);if(-1===t)throw"Failure to remove child! Trying to remove a child we don't have!";u.splice(t,1)}}t.exports=o},{}],4:[function(e,t,n){t.exports={init:function(){function e(e){var t=this.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;if(n=+t||0,1/0===Math.abs(n)&&(n=0),n>=r)return-1;for(n=Math.max(n>=0?n:r-Math.abs(n),0);r>n;){if(n in o&&o[n]===e)return n;n++}return-1}),HTMLCanvasElement.prototype.relMouseCoords=e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}},{}]},{},[1])(1)});